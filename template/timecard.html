{% extends "base.html" %}
{% block content %}
<form action="." method="post">
    <span style="margin-left:45px;"><b>Timesheet Submission</b></span>
    <br><br>
   {{ form.as_table }}
    <br><br>
    <span style="margin-left:45px;"><b>Job Entry</b></span>
    <div style="margin-left:45px;">
        <table  cellpadding="8">

         {% for i in '012'|make_list %}
             <tr>
                <td >
         {% if job_list %}
            <select name="jobcode{{i}}">
                <option value="0" selected>Select Job</option>
            {% for job in job_list %}
                <option value="{{job.pk}}"> {{job.job_code}}</option>
            {% endfor %}
            </select></td><td >
            Hrs. worked <input type="text" name="hoursworked{{i}}" onchange="getlabortotal({{i}});"></td><td>
            Total : <text name="total{{i}}" value="{{ job.hourly_rate }}">{% widthratio job.hourly_rate 5 100 as width %}</text>
         {% endif %}
            </td></tr>
         {% endfor %}
        </table>
    </div>
    <br><br>
    <span style="margin-left:45px;"><B>Machine Entry</B></span>
        <div style="margin-left:45px;">
        <table  cellpadding="8">

         {% for i in '012'|make_list %}
            <tr>
                <td>
         {% if machine_list %}
            <select name="machinecode{{i}}">
                <option value="0" selected>Select Machine</option>
            {% for machine in machine_list %}
                <option value="{{machine.id}}"> {{ machine.machine_code}}</option>
            {% endfor %}
            </select></td><td>
            Hrs. worked <input type="text" name="hoursused{{i}}"></td><td>
            Total : <text name="machinetotal{{i}}" value="{{ machine.hourly_rate }}"></text>
         {% endif %}
            </td></tr>
         {% endfor %}

        </table>
        </div>
        <br><br>
    <div><table cellpadding="10"><tr><td></td><td><input type="reset" value="Clear"></td><td><input type="submit" value="submit"></td><td></td></tr></table></div>


    {% csrf_token %}
</form>

<script type="text/javascript">
function getlabortotal(i)
{
    var ename = "jobcode" + i;
    var e = document.getElementById(ename);
    alert(ename);
    var rate = e.options[e.selectedIndex].value;
    alert("here")
    var a = document.getElementById("hoursworked"+i).value;
    document.getElementById("total").innerText= a*rate;
    alert(i);
    alert(rate);
    alert("here")
}

</script>

{% endblock %}